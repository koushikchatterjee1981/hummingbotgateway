{"version":3,"file":"TokenBundle.js","names":["TokenBundle","constructor","tokens","_defineProperty","token","tokensById","has","id","set","get","add","withAmount","sub","values","bundle","forEach","Map"],"sources":["../../src/TokenBundle.ts"],"sourcesContent":["import { AssetAmount } from \"./AssetAmount.js\";\n\n/**\n * Mutable\n */\nexport class TokenBundle {\n  readonly tokensById: Map<string, AssetAmount>;\n\n  constructor(...tokens: AssetAmount[]) {\n    this.tokensById = new Map<string, AssetAmount>();\n    tokens.forEach(this.add);\n  }\n\n  add = (token: AssetAmount): TokenBundle => {\n    if (this.tokensById.has(token.id))\n      this.tokensById.set(token.id, this.tokensById.get(token.id).add(token));\n    else this.tokensById.set(token.id, token);\n    return this;\n  };\n\n  sub = (token: AssetAmount): TokenBundle => {\n    if (!this.tokensById.has(token.id))\n      this.tokensById.set(token.id, token.withAmount(0n));\n    this.tokensById.set(token.id, this.tokensById.get(token.id).sub(token));\n    return this;\n  };\n\n  token = (id: string): AssetAmount | undefined => this.tokensById.get(id);\n\n  tokens = (): AssetAmount[] => {\n    return [...this.tokensById.values()];\n  };\n\n  addBundle = (bundle: TokenBundle): TokenBundle => {\n    bundle.tokens().forEach(this.add);\n    return this;\n  };\n}\n"],"mappings":";;;AAEA;AACA;AACA;AACA,OAAO,MAAMA,WAAW,CAAC;EAGvBC,WAAWA,CAAC,GAAGC,MAAqB,EAAE;IAAAC,eAAA;IAAAA,eAAA,cAK/BC,KAAkB,IAAkB;MACzC,IAAI,IAAI,CAACC,UAAU,CAACC,GAAG,CAACF,KAAK,CAACG,EAAE,CAAC,EAC/B,IAAI,CAACF,UAAU,CAACG,GAAG,CAACJ,KAAK,CAACG,EAAE,EAAE,IAAI,CAACF,UAAU,CAACI,GAAG,CAACL,KAAK,CAACG,EAAE,CAAC,CAACG,GAAG,CAACN,KAAK,CAAC,CAAC,CAAC,KACrE,IAAI,CAACC,UAAU,CAACG,GAAG,CAACJ,KAAK,CAACG,EAAE,EAAEH,KAAK,CAAC;MACzC,OAAO,IAAI;IACb,CAAC;IAAAD,eAAA,cAEMC,KAAkB,IAAkB;MACzC,IAAI,CAAC,IAAI,CAACC,UAAU,CAACC,GAAG,CAACF,KAAK,CAACG,EAAE,CAAC,EAChC,IAAI,CAACF,UAAU,CAACG,GAAG,CAACJ,KAAK,CAACG,EAAE,EAAEH,KAAK,CAACO,UAAU,CAAC,EAAE,CAAC,CAAC;MACrD,IAAI,CAACN,UAAU,CAACG,GAAG,CAACJ,KAAK,CAACG,EAAE,EAAE,IAAI,CAACF,UAAU,CAACI,GAAG,CAACL,KAAK,CAACG,EAAE,CAAC,CAACK,GAAG,CAACR,KAAK,CAAC,CAAC;MACvE,OAAO,IAAI;IACb,CAAC;IAAAD,eAAA,gBAEQI,EAAU,IAA8B,IAAI,CAACF,UAAU,CAACI,GAAG,CAACF,EAAE,CAAC;IAAAJ,eAAA,iBAE/D,MAAqB;MAC5B,OAAO,CAAC,GAAG,IAAI,CAACE,UAAU,CAACQ,MAAM,CAAC,CAAC,CAAC;IACtC,CAAC;IAAAV,eAAA,oBAEYW,MAAmB,IAAkB;MAChDA,MAAM,CAACZ,MAAM,CAAC,CAAC,CAACa,OAAO,CAAC,IAAI,CAACL,GAAG,CAAC;MACjC,OAAO,IAAI;IACb,CAAC;IA3BC,IAAI,CAACL,UAAU,GAAG,IAAIW,GAAG,CAAsB,CAAC;IAChDd,MAAM,CAACa,OAAO,CAAC,IAAI,CAACL,GAAG,CAAC;EAC1B;AA0BF","ignoreList":[]}