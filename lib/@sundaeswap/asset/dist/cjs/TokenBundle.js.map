{"version":3,"file":"TokenBundle.js","names":["TokenBundle","exports","_createClass","_this","_classCallCheck","_defineProperty","token","tokensById","has","id","set","get","add","withAmount","sub","_toConsumableArray","values","bundle","tokens","forEach","Map","_len","arguments","length","Array","_key"],"sources":["../../src/TokenBundle.ts"],"sourcesContent":["import { AssetAmount } from \"./AssetAmount.js\";\n\n/**\n * Mutable\n */\nexport class TokenBundle {\n  readonly tokensById: Map<string, AssetAmount>;\n\n  constructor(...tokens: AssetAmount[]) {\n    this.tokensById = new Map<string, AssetAmount>();\n    tokens.forEach(this.add);\n  }\n\n  add = (token: AssetAmount): TokenBundle => {\n    if (this.tokensById.has(token.id))\n      this.tokensById.set(token.id, this.tokensById.get(token.id).add(token));\n    else this.tokensById.set(token.id, token);\n    return this;\n  };\n\n  sub = (token: AssetAmount): TokenBundle => {\n    if (!this.tokensById.has(token.id))\n      this.tokensById.set(token.id, token.withAmount(0n));\n    this.tokensById.set(token.id, this.tokensById.get(token.id).sub(token));\n    return this;\n  };\n\n  token = (id: string): AssetAmount | undefined => this.tokensById.get(id);\n\n  tokens = (): AssetAmount[] => {\n    return [...this.tokensById.values()];\n  };\n\n  addBundle = (bundle: TokenBundle): TokenBundle => {\n    bundle.tokens().forEach(this.add);\n    return this;\n  };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAFA,IAGaA,WAAW,GAAAC,OAAA,CAAAD,WAAA,gBAAAE,YAAA,CAGtB,SAAAF,YAAA,EAAsC;EAAA,IAAAG,KAAA;EAAAC,eAAA,OAAAJ,WAAA;EAAAK,eAAA;EAAAA,eAAA,cAKhC,UAACC,KAAkB,EAAkB;IACzC,IAAIH,KAAI,CAACI,UAAU,CAACC,GAAG,CAACF,KAAK,CAACG,EAAE,CAAC,EAC/BN,KAAI,CAACI,UAAU,CAACG,GAAG,CAACJ,KAAK,CAACG,EAAE,EAAEN,KAAI,CAACI,UAAU,CAACI,GAAG,CAACL,KAAK,CAACG,EAAE,CAAC,CAACG,GAAG,CAACN,KAAK,CAAC,CAAC,CAAC,KACrEH,KAAI,CAACI,UAAU,CAACG,GAAG,CAACJ,KAAK,CAACG,EAAE,EAAEH,KAAK,CAAC;IACzC,OAAOH,KAAI;EACb,CAAC;EAAAE,eAAA,cAEK,UAACC,KAAkB,EAAkB;IACzC,IAAI,CAACH,KAAI,CAACI,UAAU,CAACC,GAAG,CAACF,KAAK,CAACG,EAAE,CAAC,EAChCN,KAAI,CAACI,UAAU,CAACG,GAAG,CAACJ,KAAK,CAACG,EAAE,EAAEH,KAAK,CAACO,UAAU,CAAC,EAAE,CAAC,CAAC;IACrDV,KAAI,CAACI,UAAU,CAACG,GAAG,CAACJ,KAAK,CAACG,EAAE,EAAEN,KAAI,CAACI,UAAU,CAACI,GAAG,CAACL,KAAK,CAACG,EAAE,CAAC,CAACK,GAAG,CAACR,KAAK,CAAC,CAAC;IACvE,OAAOH,KAAI;EACb,CAAC;EAAAE,eAAA,gBAEO,UAACI,EAAU;IAAA,OAA8BN,KAAI,CAACI,UAAU,CAACI,GAAG,CAACF,EAAE,CAAC;EAAA;EAAAJ,eAAA,iBAE/D,YAAqB;IAC5B,OAAAU,kBAAA,CAAWZ,KAAI,CAACI,UAAU,CAACS,MAAM,CAAC,CAAC;EACrC,CAAC;EAAAX,eAAA,oBAEW,UAACY,MAAmB,EAAkB;IAChDA,MAAM,CAACC,MAAM,CAAC,CAAC,CAACC,OAAO,CAAChB,KAAI,CAACS,GAAG,CAAC;IACjC,OAAOT,KAAI;EACb,CAAC;EA3BC,IAAI,CAACI,UAAU,GAAG,IAAIa,GAAG,CAAsB,CAAC;EAAC,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EADpCL,MAAM,OAAAM,KAAA,CAAAH,IAAA,GAAAI,IAAA,MAAAA,IAAA,GAAAJ,IAAA,EAAAI,IAAA;IAANP,MAAM,CAAAO,IAAA,IAAAH,SAAA,CAAAG,IAAA;EAAA;EAEnBP,MAAM,CAACC,OAAO,CAAC,IAAI,CAACP,GAAG,CAAC;AAC1B,CAAC","ignoreList":[]}